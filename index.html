<!DOCTYPE html>
<html lang="de">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>ALEX</title>
</head>

<script>

	function HTTPGET()
	{
		var myHeaders = new Headers();
		myHeaders.append("Authorization", "OTI3NGNkMmEtMjE0Yy00NjFjLWE5NDMtYWE3YjQ4NzI4N2Ni");

		var requestOptions = {
			method: 'GET'
		,	mode: 'cors'
		,	headers: myHeaders
		,	'Access-Control-Allow-Origin': '*'
		,	redirect: 'follow'
		};

		fetch("http://localhost:4480/EmployeeDayIntervals?id=10880&begin=01.12.2021&end=01.12.2021&allstates=true", requestOptions) //&WebApiServerKey=9274cd2a-214c-461c-a943-aa7b487287cb
		.then(response => response.text())
		.then(result => console.log(result))
		.catch(error => console.log('error', error));
	}

	function GetHTTPRequest()
	{
		let url = document.getElementById('url').value;
		let apiKey = document.getElementById('apiKey').value;

		if(url)
		{
			if(apiKey.length >= 1)
				url = url.concat('&WebApiServerKey=', apiKey);

			fetch (url)
			.then (function (response) {
				return response.json();
			}).then (function (data) {
				document.getElementById("json").innerHTML = JSON.stringify(data, undefined, 2);	
			}).catch (function (error) {
				document.getElementById("json").innerHTML = "Es konnte keine Verbindung zum Alex-Webserver hergestellt werden.\n" + error;
			});								
		}
		else
		{
			document.getElementById("json").innerHTML = "Bitte geben Sie eine URL ein";	
		}
	}
</script>

<body>
	<div class="container">
		<form>
			<table>
				<tr>
					<td><b>API-Key:</b></td>
					<td>
					  <input type="text" style="width: 35rem" id="apiKey">
				  </td>
				  </tr>
				<tr>
				  <td><b>URL:</b></td>
					  <td>
						<input type="text" style="width: 35rem" id="url" placeholder="http://localhost:4401/EmployeeDayIntervals?" value="http://localhost:4480/EmployeeDayIntervals?id=10880&begin=01.12.2021&end=01.12.2021&allstates=true">
					</td>
				</tr>
			  </table> 	
			  <input type="button" onclick='GetHTTPRequest()' value="Absenden">
			  <input type="button" onclick='HTTPGET()' value="HTTPGET Absenden">
			  <!-- <input type="button" onclick='GetHTTPRequest()' value="Absenden"> -->
			  <input type="reset" value="ZurÃ¼cksetzen">
		</form>
		  <h3>Ausgabe</h3>
		  <pre id="json"></pre>
	</div>
</body>
</html>